<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Water Spinach - android</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href=".././theme/css/main.css" type="text/css"/>
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,900,400italic,700italic">
    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Water Spinach Atom Feed" />
    
    
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <!--[if lte IE 7]>
        <link rel="stylesheet" type="text/css" media="all" href=".././css/ie.css"/>
        <script src=".././js/IE8.js" type="text/javascript"></script><![endif]-->

    <!--[if lt IE 7]>
         <link rel="stylesheet" type="text/css" media="all" href=".././css/ie6.css"/><![endif]-->

        
<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34233563-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_gat._anonymizeIp']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>

        
  </head> 
  <body id="index" class="home">
    <!--
<a href="https://github.com/khuevu">

<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />

</a>
-->
    <!--Logo, site metadata and navigation menu-->
    <header id="side" class="body">
    <aside id="logo"><div><img src=".././theme/images/logo.jpg" width="210" height="140"/></div>
    <hgroup>
    <h1 id="title"><a href="../.">Water Spinach </a></h1>
    <h2>Enough to fill the stomach</h2>
    </hgroup>
    </aside>  
    <nav>
        <ul class="menu">
            
            <li ><a href=".././category/Blog.html">Blog</a></li>
            
            <li><a href=".././tags.html">Tags</a></li>
            <li><a href=".././archive.html">Archive</a></li>
            <li><a href=".././about.html">About</a></li>
        </ul>
    </nav>
    <div id="credit">
    Powered by <a href="http://pelican.notmyidea.org/">Pelican</a>
    </div>
    </header>
    <!-- Content Block -->
    
<section id="content" class="body">

<ol id="posts" class="hfeed" start="9">
  

    

    <li>
      <article class="entry">
        <header>
        <h1 class="entry-title"><a href=".././2013/04/24/actionbar-tab-with-pager.html">ActionBar Tab with Pager</a></h1>
        <abbr class="published" title="2013-04-24T00:00:00">
                Wed 24 April 2013
        </abbr>
        <!--<p>In <a href=".././category/Blog.html"><b>Blog</b></a></p>-->
        </header>

        <div class="entry-content">
          <p>There are a number of questions on stackoverflow about this. In Android API, the ActionBar provides you with the capability of navigating Fragments in Tab mode, while Pager enables swiping of Fragments. And sometimes you will want to have both of these to enhance the user experience. This is a tutorial on how to combine both types of navigation in one activity.</p>
<p>In the implementation, the idea is to bind the event listener of ActionBar's TabListener and ViewPager's OnPageChangeListener into one class. So when there is event triggered in one component (tab or pager), you can invoke the respective action on the other. </p>
<div class="codehilite"><pre><span class="kr">public</span> <span class="kr">static</span> <span class="kr">class</span> <span class="nx">TabPagerAdapter</span> <span class="kr">extends</span> <span class="nx">FragmentPagerAdapter</span> <span class="kr">implements</span> <span class="nx">ActionBar</span><span class="p">.</span><span class="nx">TabListener</span><span class="p">,</span> <span class="nx">ViewPager</span><span class="p">.</span><span class="nx">OnPageChangeListener</span> <span class="p">{</span>

    <span class="kr">private</span> <span class="nx">SherlockFragmentActivity</span> <span class="nx">activity</span><span class="p">;</span>
    <span class="kr">private</span> <span class="nx">ViewPager</span> <span class="nx">viewPager</span><span class="p">;</span>
    <span class="kr">private</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nx">Fragment</span><span class="o">&gt;</span> <span class="nx">fragments</span><span class="p">;</span>

    <span class="kr">public</span> <span class="nx">TabPagerAdapter</span><span class="p">(</span><span class="nx">SherlockFragmentActivity</span> <span class="nx">activity</span><span class="p">,</span> <span class="nx">ViewPager</span> <span class="nx">viewPager</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">activity</span><span class="p">.</span><span class="nx">getSupportFragmentManager</span><span class="p">());</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">activity</span> <span class="o">=</span> <span class="nx">activity</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">viewPager</span> <span class="o">=</span> <span class="nx">viewPager</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">viewPager</span><span class="p">.</span><span class="nx">setAdapter</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">viewPager</span><span class="p">.</span><span class="nx">setOnPageChangeListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">fragments</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArrayList</span><span class="o">&lt;</span><span class="nx">Fragment</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kr">public</span> <span class="k">void</span> <span class="nx">addTab</span><span class="p">(</span><span class="nx">ActionBar</span><span class="p">.</span><span class="nx">Tab</span> <span class="nx">tab</span><span class="p">,</span> <span class="nx">Class</span><span class="cp">&lt;?</span> <span class="k">extends</span> <span class="nx">Fragment</span><span class="o">&gt;</span> <span class="nx">fragmentClass</span><span class="p">)</span> <span class="nx">throws</span> <span class="nx">IllegalAccessException</span><span class="p">,</span> <span class="nx">InstantiationException</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">.</span><span class="nx">activity</span><span class="o">.</span><span class="nx">getSupportActionBar</span><span class="p">()</span><span class="o">.</span><span class="nx">addTab</span><span class="p">(</span><span class="nx">tab</span><span class="o">.</span><span class="nx">setTabListener</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
        <span class="nx">fragments</span><span class="o">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">fragmentClass</span><span class="o">.</span><span class="nx">newInstance</span><span class="p">());</span>
        <span class="nx">notifyDataSetChanged</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="o">@</span><span class="nx">Override</span>
    <span class="k">public</span> <span class="nx">void</span> <span class="nx">onTabSelected</span><span class="p">(</span><span class="nx">ActionBar</span><span class="o">.</span><span class="nx">Tab</span> <span class="nx">tab</span><span class="p">,</span> <span class="nx">FragmentTransaction</span> <span class="nx">ft</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">viewPager</span><span class="o">.</span><span class="nx">setCurrentItem</span><span class="p">(</span><span class="nx">tab</span><span class="o">.</span><span class="nx">getPosition</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="o">@</span><span class="nx">Override</span>
    <span class="k">public</span> <span class="nx">void</span> <span class="nx">onTabReselected</span><span class="p">(</span><span class="nx">ActionBar</span><span class="o">.</span><span class="nx">Tab</span> <span class="nx">tab</span><span class="p">,</span> <span class="nx">FragmentTransaction</span> <span class="nx">ft</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">viewPager</span><span class="o">.</span><span class="nx">setCurrentItem</span><span class="p">(</span><span class="nx">tab</span><span class="o">.</span><span class="nx">getPosition</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="o">@</span><span class="nx">Override</span>
    <span class="k">public</span> <span class="nx">void</span> <span class="nx">onPageSelected</span><span class="p">(</span><span class="nx">int</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">.</span><span class="nx">activity</span><span class="o">.</span><span class="nx">getSupportActionBar</span><span class="p">()</span><span class="o">.</span><span class="nx">getTabAt</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">.</span><span class="nx">select</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// some interface methods like onTabUnSelected is obmitted for brevity</span>
    <span class="o">...</span>

    <span class="o">@</span><span class="nx">Override</span>
    <span class="k">public</span> <span class="nx">Fragment</span> <span class="nx">getItem</span><span class="p">(</span><span class="nx">int</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fragments</span><span class="o">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="o">@</span><span class="nx">Override</span>
    <span class="k">public</span> <span class="nx">int</span> <span class="nx">getCount</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">activity</span><span class="o">.</span><span class="nx">getSupportActionBar</span><span class="p">()</span><span class="o">.</span><span class="nx">getTabCount</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>For example, in <code>addTab</code>, besides adding tab with ActionBar.addTab, you need to call notifyDataSetChanged() of the FragmentPagerAdapter as well. The rest is pretty much self-explained. </p>
<p>In the layout file, declare a Layout with ViewPager component inside: </p>
<div class="codehilite"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
          <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
          <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
          <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;android.support.v4.view.ViewPager</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/pager&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
    <span class="na">android:layout_weight=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>


<p>In your Activity class, create an instance of TabPagerAdapter and add new Tabs with their respective classes:</p>
<div class="codehilite"><pre><span class="p">@</span><span class="n">Override</span>
<span class="n">public</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>

    <span class="n">requestWindowFeature</span><span class="p">(</span><span class="n">Window</span><span class="p">.</span><span class="n">FEATURE_INDETERMINATE_PROGRESS</span><span class="p">);</span>

    <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">main</span><span class="p">);</span>

    <span class="n">final</span> <span class="n">ActionBar</span> <span class="n">ab</span> <span class="p">=</span> <span class="n">getSupportActionBar</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">ab</span><span class="p">.</span><span class="n">getNavigationMode</span><span class="p">()</span> !<span class="p">=</span> <span class="n">ActionBar</span><span class="p">.</span><span class="n">NAVIGATION_MODE_TABS</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ab</span><span class="p">.</span><span class="n">setDisplayShowTitleEnabled</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="n">ab</span><span class="p">.</span><span class="n">setNavigationMode</span><span class="p">(</span><span class="n">ActionBar</span><span class="p">.</span><span class="n">NAVIGATION_MODE_TABS</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">ViewPager</span> <span class="n">pager</span> <span class="p">=</span> <span class="p">(</span><span class="n">ViewPager</span><span class="p">)</span><span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">pager</span><span class="p">);</span>
    <span class="n">TabPagerAdapter</span> <span class="n">tabPagerAdapter</span> <span class="p">=</span> <span class="n">new</span> <span class="n">TabPagerAdapter</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">pager</span><span class="p">);</span>

    <span class="k">try</span> <span class="p">{</span>

        <span class="n">tabPagerAdapter</span><span class="p">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">ab</span><span class="p">.</span><span class="n">newTab</span><span class="p">().</span><span class="n">setText</span><span class="p">(</span>&quot;<span class="n">Browse</span>&quot;<span class="p">),</span> <span class="n">CategoryListFragment</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>

        <span class="n">tabPagerAdapter</span><span class="p">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">ab</span><span class="p">.</span><span class="n">newTab</span><span class="p">().</span><span class="n">setText</span><span class="p">(</span>&quot;<span class="n">Home</span>&quot;<span class="p">),</span> <span class="n">HomeFragment</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">InstantiationException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
        </div>

        <footer>
          <div class="post-info">
<p>Tags: &nbsp;<a href=".././tag/android.html">android</a>&nbsp;&nbsp;</p>

</div><!-- /.post-info -->
          <!--
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="khuevu">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
-->
          <p><a href=".././2013/04/24/actionbar-tab-with-pager.html#disqus_thread">Comments</a>.</p>
        </footer>
      </article>
    </li>

    
    
  

    

    <li>
      <article class="entry">

      <header> 
      <h1 class="entry-title"><a href=".././2013/02/04/firefoxOs-galaxynexus-review.html">Firefox OS on Galaxy Nexus - Review</a></h1>
        <abbr class="published" title="2013-02-04T00:00:00">
                Mon 04 February 2013
        </abbr>
        <!--<p>In <a href=".././category/Blog.html"><b>Blog</b></a></p>-->
      </header>

      <div class="entry-content">
        <p>Smartphone landscape has never been this hot, with RIM introduces their new OS platform, <a href="http://sg.blackberry.com/software/smartphones/blackberry-10-os.html">Blackberry 10 OS</a>. The Software have been a critical wining factor in the phone war. It appeals to users in two ways: providing the best user experience or creating a strong ecosystem. The later can be ...</p>
        <p class="readmore">
        <a href=".././2013/02/04/firefoxOs-galaxynexus-review.html"><b>Read more</b></a>
        </p>
      </div>

      <footer>

      </footer>
      </article>
    </li>
    
    
  
  </ol>
  
<p class="paginator">
  
  
</p>



</section>

    <footer id="footer" class="body">
      <address id="about">
      </address>
    </footer>
    
<script type="text/javascript">
    var disqus_shortname = 'waterspinach';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

  </body>
</html>