<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />    
    <meta name="author" content="Vu Minh Khue"/>
    
    <title>Water Spinach</title>

    <link rel="stylesheet" href="/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="/theme/css/main.css" type="text/css"/>
    <link rel="stylesheet" href="/theme/css/foundation-icons.css"/>
    
    <!-- Feeds -->

    <script src="/theme/js/vendor/modernizr.js"></script>

    <!-- Font Google Droid -->
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Sans+Mono|Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34233563-1']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_gat._anonymizeIp']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>
    
     
  <div class="off-canvas-wrap">
    <div class="inner-wrap">
      <!-- Mobile Navigation -->
      <nav class="tab-bar show-for-small-only">
        <section class="left-small show-for-small-only">
          <a class="left-off-canvas-toggle menu-icon"><span></span></a>
        </section>

        <section class="middle tab-bar-section">
          <h1 class="title">Water Spinach</h1>
        </section>

        <section class="right-small">
          <a class="right-off-canvas-toggle menu-icon"><span></span></a>
        </section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li  class="active" ><a href="../../../category/Programming.html">Programming</a></li>
          <li ><a href="../../../category/Random.html">Random</a></li>
          <li><a href="../../../archive.html">Archive</a>  </li>
          <li><a href="#">About Me</a></li>
        </ul>

      </aside>

      <aside class="right-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Tags</label></li>
          <li><a href="../../../tag/tunnel.html">tunnel</a></li>
          <li><a href="../../../tag/spring.html">spring</a></li>
          <li><a href="../../../tag/tutorial.html">tutorial</a></li>
          <li><a href="../../../tag/firewall.html">firewall</a></li>
          <li><a href="../../../tag/mysql.html">mysql</a></li>
          <li><a href="../../../tag/hibernate.html">hibernate</a></li>
          <li><a href="../../../tag/tcp.html">tcp</a></li>
          <li><a href="../../../tag/http.html">http</a></li>
          <li><a href="../../../tag/tunneling.html">tunneling</a></li>
          <li><a href="../../../tag/javascript.html">javascript</a></li>
          <li><a href="../../../tag/firefox.html">firefox</a></li>
          <li><a href="../../../tag/python.html">python</a></li>
          <li><a href="../../../tag/scalability.html">scalability</a></li>
          <li><a href="../../../tag/encoding.html">encoding</a></li>
          <li><a href="../../../tag/pygame.html">pygame</a></li>
          <li><a href="../../../tag/java.html">java</a></li>
          <li><a href="../../../tag/replication.html">replication</a></li>
          <li><a href="../../../tag/optimization.html">optimization</a></li>
          <li><a href="../../../tag/nexus.html">nexus</a></li>
          <li><a href="../../../tag/facebook graph.html">facebook graph</a></li>
          <li><a href="../../../tag/android.html">android</a></li>
        </ul>
      </aside>

      <!-- Medium or Wide Screen Navigation -->
      <nav class="top-bar hide-for-small-only" data-topbar>
        <ul class="title-area">
          <li class="name">
            <h1><a href="../../..">Water Spinach</a></h1>
          </li>
        </ul>

        <section class="top-bar-section">
          <ul class="left">
            <li  class="active" ><a href="../../../category/Programming.html">Programming</a></li>
            <li ><a href="../../../category/Random.html">Random</a></li>
            <li><a href="../../../archive.html">Archive</a>  </li>
            <li><a href="#">About Me</a></li>
          </ul>
        </section>
      </nav>

      <section class="main-section">
        <div class="row">
          <!-- Main Content -->
          <div class="small-12 medium-9 columns" role="content">
<article>
  <h2>Character Encoding with&nbsp;Unicode</h2>
  <h2>The Unicode&nbsp;Standard</h2>
<p>It is always a pay off to understand how character encoding scheme works. Computer only understands number. So there is a need to have a convention to convert from character to number and vice versa. In essence, a string is represented as a array of bytes. A byte can represent 256 values. So it was fine at the begining when only English characters are used in digital world. Each byte simply represent one character. But problem arised when another languages come in with all the different characters. 256 values are not enough to accommodate all of&nbsp;them.    </p>
<p>You might think of using the same number to represent different characters under different schemes. But that will limit the interchangable of documents and limit a document to contain characters from only one&nbsp;language. </p>
<p>Long story short, Unicode is a standard attempting to contain the alphabets for every human language. It does so by assigning an integer value (code point) to every alphabet. It is a document which maps every character (<code>LATIN SMALL LETTER A</code>, for example) to a number (<code>0061</code> in this&nbsp;case). </p>
<h2>Unicode&nbsp;Encoding</h2>
<p>Remember computer stores string as an array of bytes? So how do we have a string of 8-bit values from code points? We use&nbsp;encoding. </p>
<p>There are a number of different encoding schemes. <span class="caps">UTF</span>-32, <span class="caps">UTF</span>-16, <span class="caps">UTF</span>-8. <span class="caps">UTF</span>-8 is the most widely used and supported encoding. It better utilizes memory spaces and and solved compatibilities problems, compared to other encoding like <span class="caps">UTF</span>-32. </p>
<ul>
<li>For code point below 128, it encodes as the corresponding byte value. The 1st 128 code points represent the same character set as in <span class="caps">ASCII</span>&nbsp;code.  </li>
<li>For code point between 128 and 0x7ff, it encodes each code point by two byte values which are between 128 and&nbsp;255</li>
<li>For code point greater than 0x7ff, it uses 3 to 4 bytes which are between 128 and&nbsp;255. </li>
</ul>
<p>To summarize, there are, in general, two steps in storing a character in&nbsp;computer: </p>
<div class="highlight"><pre><span class="n">Character</span> <span class="o">--&gt;</span> <span class="n">Integer</span> <span class="n">Value</span> <span class="p">(</span><span class="n">Code</span> <span class="n">point</span><span class="p">)</span> <span class="o">--&gt;</span> <span class="n">String</span> <span class="n">of</span> <span class="mi">8</span><span class="o">-</span><span class="n">bit</span> <span class="n">values</span>
</pre></div>


<p>The encoding of character to code point is handled by the Unicode standard. For the second step, any encoding scheme can be used besides <span class="caps">UTF</span>-8. Let&#8217;s say if we use <span class="caps">ASCII</span> or <span class="caps">ISO</span>-8859-1, if string only contains code point below 128 or 255 respectively, we will have each byte as the same value of the code point. But it contains code point above these value, error will occur (program normally will throw&nbsp;exception).</p>
<h2>Unicode in&nbsp;Python</h2>
<p>In Python 2x, the default encoding is Extended <span class="caps">ASCII</span>. If you attempt to use a character with code point &gt;= 256, exception will be&nbsp;thrown: </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="go">&gt;&gt;&gt; chr(40000)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="go">   ValueError: chr() arg not in range(256)</span>
</pre></div>
</td></tr></table>

<p>To get the unicode character in the above&nbsp;case:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="go">&gt;&gt;&gt; unichr(40000)</span>
<span class="go">u&#39;\u9c40&#39;</span>
</pre></div>
</td></tr></table>

<p>To create an unicode string, use this&nbsp;syntax:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="s">u&quot;a</span><span class="se">\xac\u1234\u20ac\U00008000</span><span class="s">&quot;</span>
</pre></div>
</td></tr></table>

<p><code>u</code> denotes unicode string; <code>\x</code> for one byte character and <code>\u</code> for 2 byte character, <code>\U</code> for 4 byte&nbsp;character. </p>
<p>Or create a Unicode string by decoding from a 8 bit string. For&nbsp;example: </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="go">&gt;&gt;&gt; unicode(&#39;a\xc2\xac\xe1\x88\xb4\xe2\x82\xac\xe8\x80\x80&#39;, &#39;utf-8&#39;)</span>
<span class="go">u&#39;a\xac\u1234\u20ac\u8000&#39;</span>
</pre></div>
</td></tr></table>

<p>Or: </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="go">&gt;&gt;&gt; s = &#39;a\xc2\xac\xe1\x88\xb4\xe2\x82\xac\xe8\x80\x80&#39;</span>
<span class="go">&gt;&gt;&gt; s.decode(&#39;utf-8&#39;)</span>
<span class="go">u&#39;a\xac\u1234\u20ac\u8000&#39;</span>
</pre></div>
</td></tr></table>

<p>The correct encoding scheme used to decode need to speicify. Otherwise, python will use the default <code>ascii</code> encoding, which will throw the&nbsp;error: </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="go">&#39;ascii&#39; codec can&#39;t decode byte 0xc2 in position 1: ordinal not in range(128)</span>
</pre></div>
</td></tr></table>

<p>In Python 3, the default encoding will be <span class="caps">UTF</span>-8. That means:
<em>   All <code>str</code> object will be <code>unicode</code> object. No more <code>u'...'</code>.<br />
</em>   Use <code>chr</code> instead of <code>unichr</code> for code point &gt;&nbsp;128</p>
  <hr/>
  <h6>Written by <a href="../../../author/vu-minh-khue.html">Vu Minh Khue</a> in <a href="../../../category/Programming.html">Programming</a> on Thu 15 November 2012. Tags: <a href="../../../tag/encoding.html">encoding</a>, <a href="../../../tag/python.html">python</a>, </h6>
</article>

<hr/>
<div class="row">
  <div class="small-12 columns">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'waterspinach';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</div>
          </div>

          <!-- Side Panels for Medium or Wide Screen -->
          <aside class="hide-for-small-only medium-3 columns">
            <div class="panel">
            <div>
              <!-- Pelican's tag cloud -->
              <label>Tags</label>
              <ul class="tagcloud">
                <li class="tag-4"><a href="../../../tag/tunnel.html">tunnel</a></li>
                <li class="tag-4"><a href="../../../tag/spring.html">spring</a></li>
                <li class="tag-4"><a href="../../../tag/tutorial.html">tutorial</a></li>
                <li class="tag-4"><a href="../../../tag/firewall.html">firewall</a></li>
                <li class="tag-1"><a href="../../../tag/mysql.html">mysql</a></li>
                <li class="tag-2"><a href="../../../tag/hibernate.html">hibernate</a></li>
                <li class="tag-4"><a href="../../../tag/tcp.html">tcp</a></li>
                <li class="tag-4"><a href="../../../tag/http.html">http</a></li>
                <li class="tag-4"><a href="../../../tag/tunneling.html">tunneling</a></li>
                <li class="tag-4"><a href="../../../tag/javascript.html">javascript</a></li>
                <li class="tag-4"><a href="../../../tag/firefox.html">firefox</a></li>
                <li class="tag-1"><a href="../../../tag/python.html">python</a></li>
                <li class="tag-2"><a href="../../../tag/scalability.html">scalability</a></li>
                <li class="tag-4"><a href="../../../tag/encoding.html">encoding</a></li>
                <li class="tag-4"><a href="../../../tag/pygame.html">pygame</a></li>
                <li class="tag-2"><a href="../../../tag/java.html">java</a></li>
                <li class="tag-4"><a href="../../../tag/replication.html">replication</a></li>
                <li class="tag-4"><a href="../../../tag/optimization.html">optimization</a></li>
                <li class="tag-4"><a href="../../../tag/nexus.html">nexus</a></li>
                <li class="tag-4"><a href="../../../tag/facebook graph.html">facebook graph</a></li>
                <li class="tag-2"><a href="../../../tag/android.html">android</a></li>
              </ul>
            </div>

            <div>
              <!-- Pelican's tag cloud -->
              <label>Archives</label>
              <ul class="side-nav">
                  <li>
                    <a href="/posts/2012">2012 (7)</a>
                  </li>
                  <li>
                    <a href="/posts/2013">2013 (5)</a>
                  </li>
              </ul>
            </div>

            <div>
              <label>Links</label>              
              <ul class="side-nav">

              </ul>
            </div>
          </div>
          </aside>
        </div>
        

      </section>

      <footer class="row">
        <div class="small-12 medium-9 columns">
          <hr/>
          <p class="text-center">
            Powered by <a href="http://getpelican.com">Pelican</a> and
            <a href="http://foundation.zurb.com/">Zurb Foundation</a>.
          </p>
        </div>
      </footer>

      <a class="exit-off-canvas"></a>
    </div>
  </div>
 
 
  <!-- Main Page Content and Sidebar -->
 
 

  <!-- Just before closing body tag -->
  <script src="/theme/js/vendor/jquery.js"></script> 
  <script src="/theme/js/vendor/fastclick.js"></script>
  <script src="/theme/js/foundation/foundation.min.js"></script>
  <script> $(document).foundation(); </script>  
  </body>
</html>