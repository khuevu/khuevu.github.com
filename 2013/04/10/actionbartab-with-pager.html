<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />    
    <meta name="author" content="Vu Minh Khue"/>
    
    <title>Water Spinach</title>

    <link rel="stylesheet" href="/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="/theme/css/main.css" type="text/css"/>
    <link rel="stylesheet" href="/theme/css/foundation-icons.css"/>
    
    <!-- Feeds -->

    <script src="/theme/js/vendor/modernizr.js"></script>

    <!-- Font Google Droid -->
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Sans+Mono|Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34233563-1']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_gat._anonymizeIp']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>
    
     
  <div class="off-canvas-wrap">
    <div class="inner-wrap">
      <!-- Mobile Navigation -->
      <nav class="tab-bar show-for-small-only">
        <section class="left-small show-for-small-only">
          <a class="left-off-canvas-toggle menu-icon"><span></span></a>
        </section>

        <section class="middle tab-bar-section">
          <h1 class="title">Water Spinach</h1>
        </section>

        <section class="right-small">
          <a class="right-off-canvas-toggle menu-icon"><span></span></a>
        </section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li  class="active" ><a href="../../../category/Programming.html">Programming</a></li>
          <li ><a href="../../../category/Random.html">Random</a></li>
          <li><a href="../../../archive.html">Archive</a>  </li>
          <li><a href="#">About Me</a></li>
        </ul>

      </aside>

      <aside class="right-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Tags</label></li>
          <li><a href="../../../tag/tunnel.html">tunnel</a></li>
          <li><a href="../../../tag/spring.html">spring</a></li>
          <li><a href="../../../tag/tutorial.html">tutorial</a></li>
          <li><a href="../../../tag/firewall.html">firewall</a></li>
          <li><a href="../../../tag/mysql.html">mysql</a></li>
          <li><a href="../../../tag/hibernate.html">hibernate</a></li>
          <li><a href="../../../tag/tcp.html">tcp</a></li>
          <li><a href="../../../tag/http.html">http</a></li>
          <li><a href="../../../tag/tunneling.html">tunneling</a></li>
          <li><a href="../../../tag/javascript.html">javascript</a></li>
          <li><a href="../../../tag/firefox.html">firefox</a></li>
          <li><a href="../../../tag/python.html">python</a></li>
          <li><a href="../../../tag/scalability.html">scalability</a></li>
          <li><a href="../../../tag/encoding.html">encoding</a></li>
          <li><a href="../../../tag/pygame.html">pygame</a></li>
          <li><a href="../../../tag/java.html">java</a></li>
          <li><a href="../../../tag/replication.html">replication</a></li>
          <li><a href="../../../tag/optimization.html">optimization</a></li>
          <li><a href="../../../tag/nexus.html">nexus</a></li>
          <li><a href="../../../tag/facebook graph.html">facebook graph</a></li>
          <li><a href="../../../tag/android.html">android</a></li>
        </ul>
      </aside>

      <!-- Medium or Wide Screen Navigation -->
      <nav class="top-bar hide-for-small-only" data-topbar>
        <ul class="title-area">
          <li class="name">
            <h1><a href="../../..">Water Spinach</a></h1>
          </li>
        </ul>

        <section class="top-bar-section">
          <ul class="left">
            <li  class="active" ><a href="../../../category/Programming.html">Programming</a></li>
            <li ><a href="../../../category/Random.html">Random</a></li>
            <li><a href="../../../archive.html">Archive</a>  </li>
            <li><a href="#">About Me</a></li>
          </ul>
        </section>
      </nav>

      <section class="main-section">
        <div class="row">
          <!-- Main Content -->
          <div class="small-12 medium-9 columns" role="content">
<article>
  <h2>ActionBar Tab with&nbsp;Pager</h2>
  <p>There are a number of questions on stackoverflow about this. In Android <span class="caps">API</span>, the ActionBar provides you with the capability of navigating Fragments in Tab mode, while Pager enables swiping of Fragments. And sometimes you will want to have both of these to enhance the user experience. This is a tutorial on how to combine both types of navigation in one&nbsp;activity.</p>
<p>In the implementation, the idea is to bind the event listener of ActionBar&#8217;s TabListener and ViewPager&#8217;s OnPageChangeListener into one class. So when there is event triggered in one component (tab or pager), you can invoke the respective action on the&nbsp;other. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">TabPagerAdapter</span> <span class="kd">extends</span> <span class="n">FragmentPagerAdapter</span> <span class="kd">implements</span> <span class="n">ActionBar</span><span class="o">.</span><span class="na">TabListener</span><span class="o">,</span> <span class="n">ViewPager</span><span class="o">.</span><span class="na">OnPageChangeListener</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">SherlockFragmentActivity</span> <span class="n">activity</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">ViewPager</span> <span class="n">viewPager</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Fragment</span><span class="o">&gt;</span> <span class="n">fragments</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">TabPagerAdapter</span><span class="o">(</span><span class="n">SherlockFragmentActivity</span> <span class="n">activity</span><span class="o">,</span> <span class="n">ViewPager</span> <span class="n">viewPager</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">activity</span><span class="o">.</span><span class="na">getSupportFragmentManager</span><span class="o">());</span>
        <span class="k">this</span><span class="o">.</span><span class="na">activity</span> <span class="o">=</span> <span class="n">activity</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">viewPager</span> <span class="o">=</span> <span class="n">viewPager</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">viewPager</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">viewPager</span><span class="o">.</span><span class="na">setOnPageChangeListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">fragments</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Fragment</span><span class="o">&gt;();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addTab</span><span class="o">(</span><span class="n">ActionBar</span><span class="o">.</span><span class="na">Tab</span> <span class="n">tab</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Fragment</span><span class="o">&gt;</span> <span class="n">fragmentClass</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IllegalAccessException</span><span class="o">,</span> <span class="n">InstantiationException</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">activity</span><span class="o">.</span><span class="na">getSupportActionBar</span><span class="o">().</span><span class="na">addTab</span><span class="o">(</span><span class="n">tab</span><span class="o">.</span><span class="na">setTabListener</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
        <span class="n">fragments</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fragmentClass</span><span class="o">.</span><span class="na">newInstance</span><span class="o">());</span>
        <span class="n">notifyDataSetChanged</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onTabSelected</span><span class="o">(</span><span class="n">ActionBar</span><span class="o">.</span><span class="na">Tab</span> <span class="n">tab</span><span class="o">,</span> <span class="n">FragmentTransaction</span> <span class="n">ft</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">viewPager</span><span class="o">.</span><span class="na">setCurrentItem</span><span class="o">(</span><span class="n">tab</span><span class="o">.</span><span class="na">getPosition</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onTabReselected</span><span class="o">(</span><span class="n">ActionBar</span><span class="o">.</span><span class="na">Tab</span> <span class="n">tab</span><span class="o">,</span> <span class="n">FragmentTransaction</span> <span class="n">ft</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">viewPager</span><span class="o">.</span><span class="na">setCurrentItem</span><span class="o">(</span><span class="n">tab</span><span class="o">.</span><span class="na">getPosition</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onPageSelected</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">activity</span><span class="o">.</span><span class="na">getSupportActionBar</span><span class="o">().</span><span class="na">getTabAt</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">select</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="c1">// some interface methods like onTabUnSelected is obmitted for brevity</span>
    <span class="o">...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Fragment</span> <span class="nf">getItem</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">fragments</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">activity</span><span class="o">.</span><span class="na">getSupportActionBar</span><span class="o">().</span><span class="na">getTabCount</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>For example, in <code>addTab</code>, besides adding tab with ActionBar.addTab, you need to call notifyDataSetChanged() of the FragmentPagerAdapter as well. The rest is pretty much&nbsp;self-explained. </p>
<p>In the layout file, declare a Layout with ViewPager component&nbsp;inside: </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
          <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
          <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
          <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;android.support.v4.view.ViewPager</span>
    <span class="na">android:id=</span><span class="s">&quot;@+id/pager&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
    <span class="na">android:layout_weight=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>
</td></tr></table>

<p>In your Activity class, create an instance of TabPagerAdapter and add new Tabs with their respective&nbsp;classes:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

    <span class="n">requestWindowFeature</span><span class="o">(</span><span class="n">Window</span><span class="o">.</span><span class="na">FEATURE_INDETERMINATE_PROGRESS</span><span class="o">);</span>

    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">main</span><span class="o">);</span>

    <span class="kd">final</span> <span class="n">ActionBar</span> <span class="n">ab</span> <span class="o">=</span> <span class="n">getSupportActionBar</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">ab</span><span class="o">.</span><span class="na">getNavigationMode</span><span class="o">()</span> <span class="o">!=</span> <span class="n">ActionBar</span><span class="o">.</span><span class="na">NAVIGATION_MODE_TABS</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ab</span><span class="o">.</span><span class="na">setDisplayShowTitleEnabled</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="n">ab</span><span class="o">.</span><span class="na">setNavigationMode</span><span class="o">(</span><span class="n">ActionBar</span><span class="o">.</span><span class="na">NAVIGATION_MODE_TABS</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">ViewPager</span> <span class="n">pager</span> <span class="o">=</span> <span class="o">(</span><span class="n">ViewPager</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">pager</span><span class="o">);</span>
    <span class="n">TabPagerAdapter</span> <span class="n">tabPagerAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TabPagerAdapter</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">pager</span><span class="o">);</span>

    <span class="k">try</span> <span class="o">{</span>

        <span class="n">tabPagerAdapter</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="n">ab</span><span class="o">.</span><span class="na">newTab</span><span class="o">().</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;Browse&quot;</span><span class="o">),</span> <span class="n">CategoryListFragment</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="n">tabPagerAdapter</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="n">ab</span><span class="o">.</span><span class="na">newTab</span><span class="o">().</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;Home&quot;</span><span class="o">),</span> <span class="n">HomeFragment</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InstantiationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table>
  <hr/>
  <h6>Written by <a href="../../../author/vu-minh-khue.html">Vu Minh Khue</a> in <a href="../../../category/Programming.html">Programming</a> on Wed 10 April 2013. Tags: <a href="../../../tag/android.html">android</a>, </h6>
</article>

<hr/>
<div class="row">
  <div class="small-12 columns">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'waterspinach';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</div>
          </div>

          <!-- Side Panels for Medium or Wide Screen -->
          <aside class="hide-for-small-only medium-3 columns">
            <div class="panel">
            <div>
              <!-- Pelican's tag cloud -->
              <label>Tags</label>
              <ul class="tagcloud">
                <li class="tag-4"><a href="../../../tag/tunnel.html">tunnel</a></li>
                <li class="tag-4"><a href="../../../tag/spring.html">spring</a></li>
                <li class="tag-4"><a href="../../../tag/tutorial.html">tutorial</a></li>
                <li class="tag-4"><a href="../../../tag/firewall.html">firewall</a></li>
                <li class="tag-1"><a href="../../../tag/mysql.html">mysql</a></li>
                <li class="tag-2"><a href="../../../tag/hibernate.html">hibernate</a></li>
                <li class="tag-4"><a href="../../../tag/tcp.html">tcp</a></li>
                <li class="tag-4"><a href="../../../tag/http.html">http</a></li>
                <li class="tag-4"><a href="../../../tag/tunneling.html">tunneling</a></li>
                <li class="tag-4"><a href="../../../tag/javascript.html">javascript</a></li>
                <li class="tag-4"><a href="../../../tag/firefox.html">firefox</a></li>
                <li class="tag-1"><a href="../../../tag/python.html">python</a></li>
                <li class="tag-2"><a href="../../../tag/scalability.html">scalability</a></li>
                <li class="tag-4"><a href="../../../tag/encoding.html">encoding</a></li>
                <li class="tag-4"><a href="../../../tag/pygame.html">pygame</a></li>
                <li class="tag-2"><a href="../../../tag/java.html">java</a></li>
                <li class="tag-4"><a href="../../../tag/replication.html">replication</a></li>
                <li class="tag-4"><a href="../../../tag/optimization.html">optimization</a></li>
                <li class="tag-4"><a href="../../../tag/nexus.html">nexus</a></li>
                <li class="tag-4"><a href="../../../tag/facebook graph.html">facebook graph</a></li>
                <li class="tag-2"><a href="../../../tag/android.html">android</a></li>
              </ul>
            </div>

            <div>
              <!-- Pelican's tag cloud -->
              <label>Archives</label>
              <ul class="side-nav">
                  <li>
                    <a href="/posts/2012">2012 (7)</a>
                  </li>
                  <li>
                    <a href="/posts/2013">2013 (5)</a>
                  </li>
              </ul>
            </div>

            <div>
              <label>Links</label>              
              <ul class="side-nav">

              </ul>
            </div>
          </div>
          </aside>
        </div>
        

      </section>

      <footer class="row">
        <div class="small-12 medium-9 columns">
          <hr/>
          <p class="text-center">
            Powered by <a href="http://getpelican.com">Pelican</a> and
            <a href="http://foundation.zurb.com/">Zurb Foundation</a>.
          </p>
        </div>
      </footer>

      <a class="exit-off-canvas"></a>
    </div>
  </div>
 
 
  <!-- Main Page Content and Sidebar -->
 
 

  <!-- Just before closing body tag -->
  <script src="/theme/js/vendor/jquery.js"></script> 
  <script src="/theme/js/vendor/fastclick.js"></script>
  <script src="/theme/js/foundation/foundation.min.js"></script>
  <script> $(document).foundation(); </script>  
  </body>
</html>